name: CI

on:
  push:
    branches:
      - master
    paths:
      - 'src/**'
      - 'public/**'
      - '.github/workflows/main.yml'

jobs:
  build:
    name: ë¹Œë“œì™€ ë””í”Œë¡œì´ ğŸ‘€
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node_version: [16]

    steps:
      - name: Checkout master ë¸Œëœì¹˜
        uses: actions/checkout@v3
        with:
            ref: master

      - name: NodeJS ${{ matrix.node_version }} ì„¤ì¹˜
        uses: actions/setup-node@v3
        with:
          node-version: ${{ matrix.node_version }}

      - name: CI ì‹¤í–‰
        run: |
          yarn install
          yarn build 
          
      - name: deploy ğŸ”¥
        uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: '${{ secrets.GOAMGIL_TOKEN }}'
          firebaseServiceAccount: '${{ secrets.GOAMGIL_FIREBASE_ACCOUNT }}'
          projectId: goamgilcafemenu
          channelId: live
